<html>

<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
    let canvas;
    let canvasContext;

    let ballRadius = 10;

    let ballX = 50;
    let ballSpeedX = 5;

    let ballY = 50;
    let ballSpeedY = 5;

    let paddle1Y = 250;
    const PADDLE_HEIGHT = 100

    calculateMousePosition = (event) => {
        let rect = canvas.getBoundingClientRect();
        let root = document.documentElement;
        let mouseX = event.clientX - rect.left - root.scrollLeft;
        let mouseY = event.clientY - rect.top - root.scrollTop;

        return {
            x: mouseX,
            y: mouseY
        };
    };

    window.onload = () => {
        canvas = document.getElementById('gameCanvas');
        canvasContext = canvas.getContext('2d');

        let framePerSecond = 30;
        let oneSecond = 1000;
        setInterval(() => {
            changeXY();
            drawEverything();
        }, oneSecond / framePerSecond);

        //mouse movement listener
        canvas.addEventListener('mousemove', mouseMoved);
    };

    //mouse listener function
    mouseMoved = (event) => {
        let mousePos = calculateMousePosition(event);
        paddle1Y = mousePos.y;

        //if paddle goes outside y axis
        if (paddle1Y > canvas.height - PADDLE_HEIGHT) {
            paddle1Y = canvas.height - PADDLE_HEIGHT;
        }
    };

    //reset ball position
    ballReset = () => {
        ballSpeedX = -ballSpeedX;
        ballX = canvas.width / 2;
        ballY = canvas.height / 2;
    }
    //make ball move
    changeXY = () => {
        ballX += ballSpeedX;
        ballY += ballSpeedY;

        //x axis movement
        if (ballX > canvas.width - ballRadius) {
            ballSpeedX *= -1;
            //ballReset();
        }
        if (ballX < ballRadius) {
            if (ballY > paddle1Y && ballY < paddle1Y + PADDLE_HEIGHT)
                ballSpeedX *= -1;
            else
                ballReset();
        }

        //y axis movement
        if (ballY > canvas.height - ballRadius) {
            ballSpeedY *= -1;
        }
        if (ballY < ballRadius) {
            ballSpeedY *= -1;
        }
    };

    drawEverything = () => {
        //canvas       
        colorRect(0, 0, canvas.width, canvas.height, 'black');
        //left player paddle 
        colorRect(0, paddle1Y, 10, PADDLE_HEIGHT, 'white');
        //ball
        colorCircle(ballX, ballY, ballRadius, 'white');
    };

    //create rectangle
    colorRect = (distanceX, distanceY, shapeHeight, shapeWidth, color) => {
        canvasContext.fillStyle = color;
        canvasContext.fillRect(distanceX, distanceY, shapeHeight, shapeWidth);
    };

    //create circle
    colorCircle = (distanceX, distanceY, radius, color) => {
        canvasContext.fillStyle = color;
        canvasContext.beginPath();
        canvasContext.arc(distanceX, distanceY, radius, 0, Math.PI * 2, true);
        canvasContext.fill();
    }
</script>

</html>